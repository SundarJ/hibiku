{
  var helpers = [':each'];
}

start
  = template:template { return template }

template = anchor+

anchor =
  open t:tokens close [\n,]? { return t; }

open = '(('
close = '))'

tokens = tokens:[^()]+ 
  {
    var parts = tokens.join('').split(" ");
    if (helpers.indexOf(parts[0]) > -1)
      return { helper: parts[0], context: parts[1] }
    else if (parts[0][parts[0].length-1] === '.')
      return false;
    else if (parts[0][0] === '>')
      return { token: 'include', context: parts[0].slice(1) }
    else return { token: 'anchor', context: tokens.join('') };
  }