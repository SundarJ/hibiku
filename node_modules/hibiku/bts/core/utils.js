const fs = require('fs');
const path = require('path');

function walk(viewsFolder, callback, within) {
    viewsFolder = typeof viewsFolder === "string" ? [viewsFolder] : viewsFolder;
    viewsFolder.forEach(function(view) {
        fs.readdirSync(view).forEach(function (f, s) {
            var dir = path.join(view, f);
            var stat = fs.statSync(dir);
            if (stat.isFile())
                callback(dir, stat);
            else if (stat.isDirectory())
                walk(dir, callback);
        });
    });
}

function filterTruthy(item) { return item };

function createRegExp(str, flags) {
  return new RegExp(str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&"), flags);
}

module.exports = {
    walk: walk,
    regex: {
        create: createRegExp
    },
    filter: {
        truthy: filterTruthy   
    }
}