const koa = require('koa');
const route = require('koa-route');
const app = module.exports = koa();

app._listen = app.listen;
app.listen = function(port, ip) {
    ip = ip || '';
    console.log('\n  hibiku now listening to', [ip,port].join(':'), '\n');
    app._listen(port, ip);
}

const render = require('./engine');

app.use(route.get('/', function*() {
    this.body = yield render('index', {
        'main title': 'hello',
        'main content area': 'yo'
    });
}));