const path = require('path');

const Configuration = function() {
    
    this.root = path.join(__dirname, '../..');
    this.user = require(path.relative(__dirname, path.join(require('app-root-path')+'', 'config')));

    this.engine = {
        
        "views": [
            path.join(this.root, "bts/pages")
        ],
        "extension": ".html"

    };
    
    const defaults = {
        "db": {
            "host": "localhost",
            "name": "hibiku"
        },
        "options": {
            "locale": "en",
            "frontPage": "index"
        },
        "engine": {
            "views": [
                path.join(this.user.root, "visage")
            ]
        }
    };
    
    this.user.db = this.user.db || defaults.db;
    this.user.options = this.user.options || defaults.options;
    this.user.engine = this.user.engine || defaults.engine;
    
    this.engine.views = this.engine.views.concat(this.user.engine.views);

};

module.exports = new Configuration;